---
layout: base
---

<head>
  <meta name="author" content="{{ site.author }}">
  <script type="application/ld+json">
  {
    "@context": "https://schema.org",
    "author": {
      "@type": "Person",
      "name": "{{ site.author }}",
      "alternateName": "{{ site.aka }}"
    }
  }
  </script>
  
  {% if page.citation %}
  <script type="application/ld+json">
  {
    "@context": "https://schema.org",
    "citation": "{{ page.citation }}"
  }
  </script>
  {% endif %}

</head>

<main>
  <article class="work brush-reveal evaporate"
           itemscope
           itemtype="https://schema.org/{{ page.schema_type | default: 'CreativeWork' }}">

    {% if page.title %}
      <h1 class="sr-only">{{ page.title }}</h1>
    {% endif %}

    {% include color_utils.html %}

    <div class="page-gradient">
      <div class="work-body" itemprop="text">
        {{ content | newline_to_br }}
      </div>
    </div>

    <!-- Popup container -->
    <div id="mediaHeroPopup">
      <img src="{{ page.media_hero }}" alt="{{ page.media_alt | default: 'Media Hero' }}">
    </div>

    <style>
      #mediaHeroPopup {
        display: none;
        position: fixed;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        background-color: rgba(0,0,0,0.8); /* optional overlay */
        justify-content: center;
        align-items: center;
        z-index: 9999;
      }

      #mediaHeroPopup img {
        max-width: 100%;
        max-height: 100%;
        object-fit: contain; /* scales nicely to screen */
      }
    </style>

<!-- Inside your layout template -->
<span id="excerpt-text" style="display:none;">
  {{ page.excerpt }}
</span>

    <script>
      const popup = document.getElementById("mediaHeroPopup");

      document.addEventListener("keydown", function(event) {
        if (event.code === "Space") {
          event.preventDefault(); // prevent page scroll
          popup.style.display = "flex"; // show popup
        }
      });

      document.addEventListener("keyup", function(event) {
        if (event.code === "Space") {
          popup.style.display = "none"; // hide popup
        }
      });
    </script>

<script>
function speakExcerpt() {
  const excerptElement = document.getElementById('excerpt-text');
  if (!excerptElement) return;

  const text = excerptElement.textContent.trim();
  if (!text) return;

  if ('speechSynthesis' in window) {
    const utterance = new SpeechSynthesisUtterance(text);

    // Optional: pick a voice (depends on browser/OS)
    const voices = window.speechSynthesis.getVoices();
    const preferredVoice = voices.find(v => v.lang.startsWith('en'));
    if (preferredVoice) {
      utterance.voice = preferredVoice;
    }

    window.speechSynthesis.cancel(); // stop any ongoing speech
    window.speechSynthesis.speak(utterance);
  } else {
    alert("Speech synthesis not supported in this browser.");
  }
}

document.addEventListener('keydown', function(event) {
  if (event.key.toLowerCase() === 'e') {
    speakExcerpt();
  }
});
</script>
  </article>

  <article class="work brush-reveal evaporate" itemscope itemtype="https://schema.org/{{ page.schema_type | default: 'CreativeWork' }}">
  {{ content | newline_to_br }}
  {% include navigation.html %}
</article>

</main>
